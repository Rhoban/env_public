<?xml version="1.0" ?>
<LocalisationTest>
	<ballExploration>10</ballExploration>
	<ballResampling>0.0</ballResampling>
	<benchmark>true</benchmark>
	<benchmarkDetail>2</benchmarkDetail>
	<compassOffset>125</compassOffset>
	<csp>
		<className>LogReader2</className>
		<motorPath>../../../Code/Vision/Resources/Logs/2015_07_17_Hefei/Log4/servos.csv</motorPath>
		<sensorPath>../../../Code/Vision/Resources/Logs/2015_07_17_Hefei/Log4/imu.csv</sensorPath>
	</csp>
	<embedded>false</embedded>
	<fieldResampling>0.002</fieldResampling>
	<imageDelay>0</imageDelay>
	<nbParticlesBF>1000</nbParticlesBF>
	<nbParticlesFF>1000</nbParticlesFF>
	<pipeline>
		<filter>
		    <className>FREAK</className>
		    <name>ballByFREAK</name>
		    <debugLevel>
		        <threads>false</threads>
		        <graphics>false</graphics>
		        <parameters>false</parameters>
		        <perfs>false</perfs>
		    </debugLevel>
		    <dependencies>
		        <dependency>source</dependency>
		        <dependency>ballROIManager</dependency>
		    </dependencies>
		    <featurePath>../../../Code/Vision/Resources/fast_freak.yml</featurePath>
		    <paramInts>
		        <ParamInt>
		          <name>matchThreshold</name>
		          <value>2</value>
		        </ParamInt>
		        <ParamInt>
		          <name>distThreshold</name>
		          <value>100</value>
		        </ParamInt>
		        <ParamInt>
		          <name>keypointSensibility</name>
		          <value>70</value>
		        </ParamInt>
		    </paramInts>
		    <paramFloats />
		    <paramPairInt />
		</filter>
		<filter>
			<className>BallROIManager</className>
			<debugLevel>
				<graphics>true</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>source</dependency>
				<dependency>ballROIDetector</dependency>
				<dependency>sparkleOfHope</dependency>
				<dependency>clipping</dependency>
			</dependencies>
			<name>ballROIManager</name>
			<paramFloats>
				<ParamFloat>
					<name>minRatio</name>
					<value>0.7</value>
				</ParamFloat>
				<ParamFloat>
					<name>maxRatio</name>
					<value>1.3</value>
				</ParamFloat>
				<ParamFloat>
					<name>sizeFactor</name>
					<value>1.2</value>
				</ParamFloat>
			</paramFloats>
			<paramInts>
				<paramInt>
					<name>tagLevel</name>
					<value>1</value>
				</paramInt>
				<paramInt>
					<name>whiteMinY</name>
					<value>170</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>SparkleOfHope</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
				<dependency>clipping</dependency>
				<dependency>sparkleOfHopeDetection</dependency>
			</dependencies>
			<name>sparkleOfHope</name>
			<paramFloats>
				<ParamFloat>
					<name>sizeFactor</name>
					<value>1.2</value>
				</ParamFloat>
				<ParamFloat>
					<name>minFillingPerc</name>
					<value>0.6</value>
				</ParamFloat>
				<ParamFloat>
					<name>maxFillingPerc</name>
					<value>1</value>
				</ParamFloat>
			</paramFloats>
			<paramInts>
				<paramInt>
					<name>tagLevel</name>
					<value>1</value>
				</paramInt>
				<paramInt>
					<name>whiteMinY</name>
					<value>150</value>
				</paramInt>
				<paramInt>
					<name>minPointDist</name>
					<value>5</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ClippingByBlob</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
				<dependency>whiteDetectionClosing</dependency>
				<dependency>fieldColor</dependency>
			</dependencies>
			<name>clippingByBlob</name>
			<paramFloats/>
			<paramInts/>
		</filter>
		<filter>
			<className>BallROIDetector</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
				<dependency>clipping</dependency>
				<dependency>whiteBallDetection</dependency>
				<dependency>whiteBallDetection</dependency>
				<dependency>sparkleDetection</dependency>
			</dependencies>
			<name>ballROIDetector</name>
			<paramFloats>
				<ParamFloat>
					<name>blobToRoiFactor</name>
					<value>1.15</value>
				</ParamFloat>
				<ParamFloat>
					<name>blobToRoiFlat</name>
					<value>4</value>
				</ParamFloat>
				<ParamFloat>
					<name>openingSize</name>
					<value>0.028</value>
				</ParamFloat>
			</paramFloats>
			<paramInts/>
		</filter>
		<filter>
			<className>WhiteGoalByROI</className>
			<debugLevel>
				<graphics>true</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>source</dependency>
				<dependency>goalMask2</dependency>
			</dependencies>
			<name>goalByROI</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>goalMinY</name>
					<value>150</value>
				</paramInt>
				<paramInt>
					<name>goalMinV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>kHeight</name>
					<value>31</value>
				</paramInt>
				<paramInt>
					<name>kWidth</name>
					<value>3</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>WhiteBallByROI</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>source</dependency>
				<dependency>ballROIManager</dependency>
				<dependency>fieldColor</dependency>
			</dependencies>
			<name>ballByROI</name>
			<paramFloats>
				<ParamFloat>
					<name>edgeToMinPointRatio</name>
					<value>0.1</value>
				</ParamFloat>
				<ParamFloat>
					<name>closureSize</name>
					<value>0.1</value>
				</ParamFloat>
				<ParamFloat>
					<name>openingSize</name>
					<value>0.1</value>
				</ParamFloat>
				<ParamFloat>
					<name>uselessBottomRatio</name>
					<value>0</value>
				</ParamFloat>
				<ParamFloat>
					<name>clusterPercentTol</name>
					<value>25</value>
				</ParamFloat>
				<ParamFloat>
					<name>clusterFlatTol</name>
					<value>1</value>
				</ParamFloat>
				<ParamFloat>
					<name>robotHeight</name>
					<value>50</value>
				</ParamFloat>
				<ParamFloat>
					<name>tilt</name>
					<value>20</value>
				</ParamFloat>
				<ParamFloat>
					<name>qTilt</name>
					<value>1</value>
				</ParamFloat>
				<ParamFloat>
					<name>reflectionMinRatio</name>
					<value>0.001</value>
				</ParamFloat>
				<ParamFloat>
					<name>lineRhoMargin</name>
					<value>5</value>
				</ParamFloat>
				<ParamFloat>
					<name>lineThetaMargin</name>
					<value>3</value>
				</ParamFloat>
			</paramFloats>
			<paramInts>
				<paramInt>
					<name>tagLevel</name>
					<value>1</value>
				</paramInt>
				<paramInt>
					<name>Epochs</name>
					<value>200</value>
				</paramInt>
				<paramInt>
					<name>ballMinY</name>
					<value>150</value>
				</paramInt>
				<paramInt>
					<name>minPointDist</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>minScore</name>
					<value>50</value>
				</paramInt>
				<paramInt>
					<name>reflectionMinY</name>
					<value>195</value>
				</paramInt>
				<paramInt>
					<name>activateCircleDetection</name>
					<value>1</value>
				</paramInt>
				<paramInt>
					<name>lineScore</name>
					<value>50</value>
				</paramInt>
				<paramInt>
					<name>lineMinLenght</name>
					<value>10</value>
				</paramInt>
				<paramInt>
					<name>lineMinDist</name>
					<value>10</value>
				</paramInt>
				<paramInt>
					<name>lineEraseThickness</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>lineNbIterations</name>
					<value>100</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Rescale</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingByBlob</dependency>
			</dependencies>
			<name>clippingByBlobDownscaled</name>
			<paramFloats>
				<ParamFloat>
					<name>ratio</name>
					<value>2.0</value>
				</ParamFloat>
			</paramFloats>
			<paramInts/>
		</filter>
		<filter>
			<className>Closure</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingByBlobDownscaled</dependency>
			</dependencies>
			<name>clippingByBlobFinal</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>Shape</name>
					<value>2</value>
				</paramInt>
				<paramInt>
					<name>kernel width</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>kernel height</name>
					<value>3</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>Closure</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingExperimental</dependency>
			</dependencies>
			<name>clippingExperimentalEroded</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>Shape</name>
					<value>2</value>
				</paramInt>
				<paramInt>
					<name>kernel width</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>kernel height</name>
					<value>3</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ClippingRules</className>
			<debugLevel>
				<graphics>true</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingByBlobFinal</dependency>
			</dependencies>
			<name>clipping</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>BinaryEdges</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clipping</dependency>
			</dependencies>
			<name>clippingBorders</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Slicer</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingBorders</dependency>
			</dependencies>
			<name>clippingBordersSliced</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>vSlices</name>
					<value>6</value>
				</paramInt>
				<paramInt>
					<name>hSlices</name>
					<value>3</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>ROIFromBlobs</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingBordersSliced</dependency>
			</dependencies>
			<name>linesROI</name>
			<paramFloats/>
			<paramInts/>
		</filter>
		<filter>
			<className>LinesByROI</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>source</dependency>
				<dependency>linesROI</dependency>
				<dependency>fieldColor</dependency>
			</dependencies>
			<name>linesByROI</name>
			<paramFloats>
				<ParamFloat>
					<name>eraseThickness</name>
					<value>15</value>
				</ParamFloat>
				<ParamFloat>
					<name>minDist</name>
					<value>20</value>
				</ParamFloat>
				<ParamFloat>
					<name>rhoTol</name>
					<value>5</value>
				</ParamFloat>
				<ParamFloat>
					<name>thetaTol</name>
					<value>1.5</value>
				</ParamFloat>
			</paramFloats>
			<paramInts>
				<paramInt>
					<name>roiMargin</name>
					<value>20</value>
				</paramInt>
				<paramInt>
					<name>nbEpochs</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>iterationsByEpoch</name>
					<value>100</value>
				</paramInt>
				<paramInt>
					<name>minScore</name>
					<value>5</value>
				</paramInt>
				<paramInt>
					<name>minEdgeSize</name>
					<value>40</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ClippingFromLines</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
				<dependency>linesByROI</dependency>
			</dependencies>
			<name>clippingExperimental</name>
			<paramFloats/>
			<paramInts/>
		</filter>
		<filter>
			<className>BinaryEdges</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>clippingExperimentalEroded</dependency>
			</dependencies>
			<name>clippingExperimentalBorders</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Rescale</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>source</dependency>
			</dependencies>
			<name>clippingSrc</name>
			<paramFloats>
				<ParamFloat>
					<name>ratio</name>
					<value>4</value>
				</ParamFloat>
			</paramFloats>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>true</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>fieldColor</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>36</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>100</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>80</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>130</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>70</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>130</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>true</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>whiteDetection</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>170</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>255</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>true</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>whiteBallDetection</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>200</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>255</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>true</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>whiteGoalDetection</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>150</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>255</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>Closure</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>whiteDetection</dependency>
			</dependencies>
			<name>whiteDetectionClosing</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>Shape</name>
					<value>2</value>
				</paramInt>
				<paramInt>
					<name>kernel height</name>
					<value>3</value>
				</paramInt>
				<paramInt>
					<name>kernel width</name>
					<value>3</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>sparkleDetection</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>200</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>255</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>ColorBounding</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>clippingSrc</dependency>
			</dependencies>
			<name>sparkleOfHopeDetection</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>minY</name>
					<value>195</value>
				</paramInt>
				<paramInt>
					<name>maxY</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minU</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxU</name>
					<value>255</value>
				</paramInt>
				<paramInt>
					<name>minV</name>
					<value>0</value>
				</paramInt>
				<paramInt>
					<name>maxV</name>
					<value>255</value>
				</paramInt>
			</paramInts>
		</filter>
		<filter>
			<className>Mask</className>
			<debugLevel>
				<graphics>false</graphics>
			</debugLevel>
			<dependencies>
				<dependency>whiteGoalDetection</dependency>
				<dependency>fieldColorDilated</dependency>
			</dependencies>
			<name>whiteGoalNearField</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Mask</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>whiteGoalNearField</dependency>
				<dependency>clippingExperimentalBorders</dependency>
			</dependencies>
			<name>goalMask</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Dilate</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>fieldColor</dependency>
			</dependencies>
			<name>fieldColorDilated</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>Shape</name>
					<value>2</value>
				</paramInt>
				<paramInt>
					<name>kernel height</name>
					<value>7</value>
				</paramInt>
				<paramInt>
					<name>kernel width</name>
					<value>7</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>Dilate</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies>
				<dependency>goalMask</dependency>
			</dependencies>
			<name>goalMask2</name>
			<paramFloats/>
			<paramInts>
				<paramInt>
					<name>Shape</name>
					<value>1</value>
				</paramInt>
				<paramInt>
					<name>kernel height</name>
					<value>11</value>
				</paramInt>
				<paramInt>
					<name>kernel width</name>
					<value>5</value>
				</paramInt>
			</paramInts>
			<paramPairInt/>
		</filter>
		<filter>
			<className>SourceLogs2</className>
			<debugLevel>
				<graphics>false</graphics>
				<parameters>false</parameters>
				<perfs>false</perfs>
				<threads>false</threads>
			</debugLevel>
			<dependencies/>
			<imagesFile>../../../Code/Vision/Resources/Logs/2015_07_17_Hefei/Log4/images.csv</imagesFile>
			<name>source</name>
			<paramFloats/>
			<paramInts/>
			<paramPairInt/>
			<startIndex>1</startIndex>
		</filter>
	</pipeline>
	<playing>false</playing>
	<robotAngleExploration>5</robotAngleExploration>
	<robotPosExploration>50</robotPosExploration>
	<showRobotView>false</showRobotView>
	<showTaggedImg>true</showTaggedImg>
	<showTopView>false</showTopView>
</LocalisationTest>
